{"ast":null,"code":"import _classCallCheck from \"/home/adithya/college/Science_Gateway/Architects/ui-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/adithya/college/Science_Gateway/Architects/ui-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/adithya/college/Science_Gateway/Architects/ui-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/adithya/college/Science_Gateway/Architects/ui-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/adithya/college/Science_Gateway/Architects/ui-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/adithya/college/Science_Gateway/Architects/ui-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _defineProperty from \"/home/adithya/college/Science_Gateway/Architects/ui-module/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/adithya/college/Science_Gateway/Architects/ui-module/src/containers/Login/Login.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport axios from \"axios\";\nimport SERVER_URL from \"../../static/Config/Config\";\nimport GoogleLogin from \"react-google-login\";\nimport setAuthToken from \"./util\";\nimport jwt_decode from \"jwt-decode\";\n\nvar styles = function styles(theme) {\n  return {\n    main: _defineProperty({\n      width: 'auto',\n      display: 'block',\n      // Fix IE 11 issue.\n      marginLeft: theme.spacing.unit * 3,\n      marginRight: theme.spacing.unit * 3\n    }, theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2), {\n      width: 400,\n      marginLeft: 'auto',\n      marginRight: 'auto'\n    }),\n    paper: {\n      marginTop: theme.spacing.unit * 8,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      padding: \"\".concat(theme.spacing.unit * 2, \"px \").concat(theme.spacing.unit * 3, \"px \").concat(theme.spacing.unit * 3, \"px\")\n    },\n    avatar: {\n      margin: theme.spacing.unit,\n      backgroundColor: theme.palette.secondary.main\n    },\n    form: {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: theme.spacing.unit\n    },\n    submit: {\n      marginTop: theme.spacing.unit * 3\n    }\n  };\n};\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this));\n\n    _this.setCurrentUser = function (decoded) {\n      return {\n        //type: SET_CURRENT_USER,\n        payload: decoded\n      };\n    };\n\n    _this.postRequestLogin = function (user) {\n      console.log(user.email, user.password);\n      axios.post(SERVER_URL + \"/login\", user).then(function (res) {\n        console.log(\"Inside server response\" + res);\n        localStorage.setItem('authToken', res.data.token); //localStorage.setItem('isAdmin', res.data.admin)\n\n        window.location.assign('/');\n      }).catch(function (err) {\n        console.log(err); // localStorage.setItem('authToken', \"\")\n\n        console.log(err.response);\n\n        _this.setState({\n          errors: \"Invalid cerdentials\"\n        }); //err.response.data\"\"\n\n      });\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      errors: \"\"\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"onChange\",\n    value: function onChange(e) {\n      console.log(\"changed\");\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n      this.setState({\n        errors: \"\"\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      e.preventDefault();\n      var user = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      this.postRequestLogin(user);\n    }\n  }, {\n    key: \"signup\",\n    value: function signup(res, type) {\n      var postData;\n\n      if (type === 'facebook' && res.email) {\n        postData = {\n          name: res.name,\n          provider: type,\n          email: res.email,\n          provider_id: res.id,\n          token: res.accessToken,\n          provider_pic: res.picture.data.url\n        };\n      }\n\n      if (type === 'google' && res.w3.U3) {\n        postData = {\n          name: res.w3.ig,\n          provider: type,\n          email: res.w3.U3,\n          provider_id: res.El,\n          token: res.Zi.access_token,\n          provider_pic: res.w3.Paa\n        };\n        localStorage.setItem('authToken', postData.token); //localStorage.setItem('isAdmin', res.data.admin)\n\n        window.location.assign('/');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var errors = this.state.errors;\n\n      var responseGoogle = function responseGoogle(response) {\n        console.log(\"google console\");\n        console.log(response);\n\n        _this2.signup(response, 'google');\n      };\n\n      return React.createElement(\"main\", {\n        className: classes.main,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(CssBaseline, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, errors), React.createElement(\"div\", {\n        className: \"RegisterForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: classes.form,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Email ID\"), React.createElement(Input, {\n        id: \"email\",\n        name: \"email\",\n        autoComplete: \"email\",\n        autoFocus: true,\n        value: this.state.email,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Input, {\n        name: \"password\",\n        type: \"password\",\n        id: \"password\",\n        autoComplete: \"current-password\",\n        value: this.state.password,\n        onChange: function onChange(e) {\n          return _this2.onChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(FormControlLabel, {\n        control: React.createElement(Checkbox, {\n          value: \"remember\",\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }),\n        label: \"Remember me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }), React.createElement(Button, {\n        style: {\n          backgroundColor: \"#3f51b5\"\n        },\n        type: \"submit\",\n        fullWidth: true,\n        variant: \"contained\",\n        color: \"primary\",\n        className: classes.submit,\n        onClick: function onClick(e) {\n          return _this2.onSubmit(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Sign in\"), React.createElement(Typography, {\n        align: \"center\",\n        marginTop: \"120px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \" Not a member yet?\")), React.createElement(GoogleLogin //266359307292-r4m70tvidvna6jcnonj36l09k3uhp9du.apps.googleusercontent.com\n      , {\n        clientId: \"498630087136-oorljhuca5lojak119ji46rvn02g764d.apps.googleusercontent.com\",\n        onSuccess: responseGoogle,\n        onFailure: responseGoogle //render={renderProps => (\n        //  <button onClick={renderProps.onClick} disabled={renderProps.disabled}>Google Login button</button>\n        //)}\n        ,\n        buttonText: \"Google Login\",\n        className: \"btn btn-outline-danger btn-block mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \" Sign In using Google Account\")))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(Login);","map":{"version":3,"sources":["/home/adithya/college/Science_Gateway/Architects/ui-module/src/containers/Login/Login.js"],"names":["React","Component","PropTypes","Button","CssBaseline","FormControl","FormControlLabel","Checkbox","Input","InputLabel","Paper","Typography","withStyles","axios","SERVER_URL","GoogleLogin","setAuthToken","jwt_decode","styles","theme","main","width","display","marginLeft","spacing","unit","marginRight","breakpoints","up","paper","marginTop","flexDirection","alignItems","padding","avatar","margin","backgroundColor","palette","secondary","form","submit","Login","setCurrentUser","decoded","payload","postRequestLogin","user","console","log","email","password","post","then","res","localStorage","setItem","data","token","window","location","assign","catch","err","response","setState","errors","state","onChange","bind","onSubmit","e","target","name","value","preventDefault","type","postData","provider","provider_id","id","accessToken","provider_pic","picture","url","w3","U3","ig","El","Zi","access_token","Paa","classes","props","responseGoogle","signup","color","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport axios from \"axios\";\r\nimport SERVER_URL from \"../../static/Config/Config\";\r\nimport GoogleLogin from \"react-google-login\";\r\nimport setAuthToken from \"./util\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nconst styles = theme => ({\r\n  main: {\r\n    width: 'auto',\r\n    display: 'block', // Fix IE 11 issue.\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginRight: theme.spacing.unit * 3,\r\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n      width: 400,\r\n      marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing.unit * 8,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing.unit,\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing.unit,\r\n  },\r\n  submit: {\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n});\r\n\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    constructor() {\r\n    super();\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      errors: \"\"\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n  setCurrentUser = decoded => {\r\n    return {\r\n      //type: SET_CURRENT_USER,\r\n      payload: decoded\r\n    };\r\n  };\r\n\r\n  onChange(e) {\r\n    console.log(\"changed\")\r\n    this.setState({ [e.target.name]: e.target.value });\r\n    this.setState({errors:\"\"});\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault();\r\n    const user = {\r\n      email: this.state.email,\r\n      password: this.state.password\r\n    };\r\n    this.postRequestLogin(user)\r\n  }\r\n\r\n  postRequestLogin = user => {\r\n    console.log(user.email, user.password)\r\n    axios\r\n    .post(SERVER_URL+\"/login\", user)\r\n    .then(res => {\r\n      console.log(\"Inside server response\" + res)\r\n      localStorage.setItem('authToken', res.data.token)\r\n      //localStorage.setItem('isAdmin', res.data.admin)\r\n      window.location.assign('/')\r\n    })\r\n    .catch(err => {\r\n      console.log(err)\r\n     // localStorage.setItem('authToken', \"\")\r\n     console.log(err.response)\r\n      this.setState({ errors: \"Invalid cerdentials\"}) \r\n      //err.response.data\"\"\r\n      });\r\n  }\r\n\r\n  signup(res, type) {\r\n    let postData;\r\n    if (type === 'facebook' && res.email) {\r\n    postData = {\r\n         name: res.name,\r\n         provider: type,\r\n         email: res.email,\r\n         provider_id: res.id,\r\n         token: res.accessToken,\r\n         provider_pic: res.picture.data.url\r\n    };\r\n   }\r\n\r\n   if (type === 'google' && res.w3.U3) {\r\n   postData = {\r\n     name: res.w3.ig,\r\n     provider: type,\r\n     email: res.w3.U3,\r\n     provider_id: res.El,\r\n     token: res.Zi.access_token,\r\n     provider_pic: res.w3.Paa\r\n   };\r\n   localStorage.setItem('authToken', postData.token)\r\n      //localStorage.setItem('isAdmin', res.data.admin)\r\n      window.location.assign('/')\r\n  }\r\n}\r\n\r\nrender() {\r\n  const { classes } = this.props\r\n  const { errors }= this.state\r\n  const responseGoogle = (response) => {\r\n    console.log(\"google console\");\r\n    console.log(response);\r\n    this.signup(response, 'google');\r\n}\r\n  return (\r\n    <main className={classes.main}>\r\n      <CssBaseline />\r\n      <div style={{color:\"red\"}}>\r\n      {errors}\r\n      </div>\r\n\r\n      <div className=\"RegisterForm\">\r\n       \r\n        <form className={classes.form}>\r\n          <FormControl margin=\"normal\" required fullWidth>\r\n            <InputLabel htmlFor=\"email\">Email ID</InputLabel>\r\n            <Input id=\"email\" name=\"email\" autoComplete=\"email\" autoFocus \r\n             value={this.state.email}\r\n             onChange={this.onChange}  />\r\n            \r\n          </FormControl>\r\n          <FormControl margin=\"normal\" required fullWidth>\r\n            <InputLabel htmlFor=\"password\">Password</InputLabel>\r\n            <Input name=\"password\" type=\"password\" id=\"password\" autoComplete=\"current-password\" \r\n             value={this.state.password}\r\n             onChange={e => this.onChange(e)}\r\n            />\r\n\r\n          </FormControl>\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n           style={{ \r\n              backgroundColor: \"#3f51b5\"\r\n            }}\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={e => this.onSubmit(e)}\r\n          >\r\n            Sign in\r\n          </Button>\r\n          \r\n          <Typography align=\"center\" marginTop=\"120px\">\r\n            <a href=\"/register\"> Not a member yet?</a>\r\n          </Typography>\r\n          \r\n          {/* <div style=\"\"> */}\r\n          <GoogleLogin\r\n          //266359307292-r4m70tvidvna6jcnonj36l09k3uhp9du.apps.googleusercontent.com\r\n            clientId=\"498630087136-oorljhuca5lojak119ji46rvn02g764d.apps.googleusercontent.com\"\r\n            onSuccess={responseGoogle}\r\n            onFailure={responseGoogle}\r\n            //render={renderProps => (\r\n            //  <button onClick={renderProps.onClick} disabled={renderProps.disabled}>Google Login button</button>\r\n            //)}\r\n            buttonText=\"Google Login\"\r\n            className=\"btn btn-outline-danger btn-block mt-4\">\r\n            <span> Sign In using Google Account</span>\r\n          </GoogleLogin>\r\n          {/* </div> */}\r\n        </form>\r\n      </div>\r\n    </main>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Login);\r\n"]},"metadata":{},"sourceType":"module"}